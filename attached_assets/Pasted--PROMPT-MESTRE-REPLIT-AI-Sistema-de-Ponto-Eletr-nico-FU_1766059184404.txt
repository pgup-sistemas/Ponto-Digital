ğŸ§  PROMPT MESTRE â€” REPLIT AI
Sistema de Ponto EletrÃ´nico (FULLSTACK â€“ RISCO CONTROLADO)

VocÃª Ã© um engenheiro de software sÃªnior.
Crie um projeto FULLSTACK, contendo FRONTEND + BACKEND no mesmo repositÃ³rio, seguindo estritamente as regras abaixo.

1ï¸âƒ£ REGRA DE OURO (nÃ£o violar)

ğŸ”´ FRONTEND e BACKEND sÃ£o camadas SEPARADAS
ğŸ”´ Nenhuma lÃ³gica de reconhecimento facial no frontend
ğŸ”´ Nenhuma imagem facial pode ser persistida

Se violar qualquer regra acima â†’ implementaÃ§Ã£o incorreta.

2ï¸âƒ£ Estrutura OBRIGATÃ“RIA do repositÃ³rio
/
 â”œâ”€â”€ frontend/
 â”‚   â”œâ”€â”€ src/
 â”‚   â”œâ”€â”€ index.html
 â”‚   â””â”€â”€ vite.config.ts
 â”‚
 â”œâ”€â”€ backend/
 â”‚   â”œâ”€â”€ app/
 â”‚   â”‚   â”œâ”€â”€ main.py
 â”‚   â”‚   â”œâ”€â”€ auth/
 â”‚   â”‚   â”œâ”€â”€ users/
 â”‚   â”‚   â”œâ”€â”€ punches/
 â”‚   â”‚   â”œâ”€â”€ justifications/
 â”‚   â”‚   â”œâ”€â”€ audit/
 â”‚   â”‚   â”œâ”€â”€ db/
 â”‚   â”‚   â””â”€â”€ utils/
 â”‚   â””â”€â”€ requirements.txt
 â”‚
 â””â”€â”€ README.md


ğŸš« NÃƒO misturar cÃ³digo
ğŸš« NÃƒO criar monorepo complexo
ğŸš« NÃƒO usar ferramentas externas

3ï¸âƒ£ STACK FIXA (nÃ£o negociar)
Frontend

React 18

TypeScript

Vite

Tailwind CSS

Fetch API

Context API

PWA

Backend

Python 3.11

FastAPI

SQLAlchemy

PostgreSQL

JWT Auth

ğŸš« Next.js
ğŸš« Redux
ğŸš« Redis
ğŸš« GPU
ğŸš« Docker/K8s

4ï¸âƒ£ ORDEM DE IMPLEMENTAÃ‡ÃƒO (OBRIGATÃ“RIA)
FASE 1 â€” FRONTEND (PRIMEIRO)

Implemente completamente:

Login

Tela de bater ponto

Captura de cÃ¢mera

Captura de GPS

UX de sucesso / falha

Justificativa

HistÃ³rico

âš ï¸ Backend pode estar mockado APENAS com fetch real, apontando para URLs que existirÃ£o depois.

FASE 2 â€” BACKEND (DEPOIS)

Somente apÃ³s o frontend estar funcional:

AutenticaÃ§Ã£o JWT

Enrollment facial

Punch com face_match

Justificativas

Auditoria

PersistÃªncia real em PostgreSQL

5ï¸âƒ£ FRONTEND â€” REGRAS CRÃTICAS

âœ”ï¸ Captura apenas 1 frame
âœ”ï¸ Converte para Base64
âœ”ï¸ Envia para backend
âœ”ï¸ DESCARTA imagem imediatamente

ğŸš« Reconhecimento facial
ğŸš« Salvar imagem
ğŸš« Liveness avanÃ§ado

6ï¸âƒ£ BACKEND â€” REGRAS CRÃTICAS

âœ”ï¸ Processar imagem somente em memÃ³ria
âœ”ï¸ Gerar embedding ArcFace 512
âœ”ï¸ L2 distance
âœ”ï¸ Threshold fixo: 0.35
âœ”ï¸ Salvar apenas embedding + score

ğŸš« Salvar imagens
ğŸš« MicroserviÃ§os
ğŸš« Redis

7ï¸âƒ£ ENDPOINTS OBRIGATÃ“RIOS
Auth

POST /auth/login

Users

POST /users

POST /users/{id}/enroll-face

Punch

POST /punches/face-match

Justifications

POST /justifications

GET /justifications

8ï¸âƒ£ STATUS DO PUNCH (REGRA FIXA)
face_match == true E GPS ok â†’ status = ok
qualquer outro caso â†’ status = pendente


ğŸš« Nunca rejeitar automaticamente

9ï¸âƒ£ SEGURANÃ‡A & LGPD

âœ”ï¸ Nunca persistir imagem
âœ”ï¸ Limpar memÃ³ria apÃ³s processamento
âœ”ï¸ HTTPS obrigatÃ³rio
âœ”ï¸ Aviso de consentimento biomÃ©trico

ğŸ”Ÿ O QUE Ã‰ PROIBIDO

ğŸš« Frontend chamando DB
ğŸš« Backend renderizando HTML
ğŸš« Reconhecimento facial no frontend
ğŸš« Upload de mÃºltiplas imagens
ğŸš« Overengineering

1ï¸âƒ£1ï¸âƒ£ OBJETIVO FINAL

O projeto deve:

Subir localmente

Ter frontend navegÃ¡vel

Ter backend funcional

Integrar via HTTP real

Ser simples, auditÃ¡vel e seguro

Permitir validar UX antes da biometria real

ğŸ”š FIM DO PROMPT